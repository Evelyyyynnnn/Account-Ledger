# 🚀 快速部署指南

## ⚠️ 重要：修复 Secret 检测问题

GitHub 检测到了代码中的 API Key，需要先修复才能推送。

---

## 🔧 第一步：修复代码（已完成 ✅）

我已经帮你修复了 `README.md`，删除了其中的 API Key。

**请确认：**
- ✅ `README.md` 中不再包含真实的 API Key
- ✅ `.gitignore` 已包含 `.env` 文件

---

## 📤 第二步：推送到 GitHub

修复后，现在可以安全地推送代码了：

```bash
# 检查状态
git status

# 添加所有文件（.env 会被自动忽略）
git add .

# 提交
git commit -m "修复：移除 README 中的敏感信息"

# 推送到 GitHub
git push origin main
```

---

## 🌐 第三步：在 Vercel 配置环境变量

### 📍 位置：
Vercel Dashboard → 你的项目 → **Settings** → **Environment Variables**

### 🔑 需要添加的变量：

#### 1. NOTION_API_KEY
- **Key**: `NOTION_API_KEY`
- **Value**: 你的 Notion API Key（从 https://www.notion.so/my-integrations 获取）
- **Environment**: 勾选 `Production`, `Preview`, `Development`

#### 2. NOTION_DATABASE_ID
- **Key**: `NOTION_DATABASE_ID`
- **Value**: 你的数据库 ID（32位字符，从 Notion 数据库 URL 中提取）
- **Environment**: 勾选 `Production`, `Preview`, `Development`

#### 3. OPENAI_API_KEY
- **Key**: `OPENAI_API_KEY`
- **Value**: 你的 OpenAI API Key（从 https://platform.openai.com/api-keys 获取）
- **Environment**: 勾选 `Production`, `Preview`, `Development`

#### 4. NODE_ENV（推荐）
- **Key**: `NODE_ENV`
- **Value**: `production`
- **Environment**: 勾选 `Production`, `Preview`

### 📝 添加步骤：

1. 在 Vercel Dashboard 中进入你的项目
2. 点击顶部 **"Settings"** 选项卡
3. 左侧菜单选择 **"Environment Variables"**
4. 点击 **"Add New"** 按钮
5. 输入 Key 和 Value，选择 Environment
6. 点击 **"Save"**
7. **重复步骤 4-6 添加所有变量**

### 🔄 重新部署：

添加完所有环境变量后：
1. 在项目页面点击 **"Deployments"** 选项卡
2. 找到最新部署，点击右侧 **"..."** → **"Redeploy"**
3. 或直接点击页面上的 **"Redeploy"** 按钮

---

## ✅ 验证部署

部署完成后，访问：
- 网站主页：`https://你的域名.vercel.app`
- API 健康检查：`https://你的域名.vercel.app/api/health`（应该返回 `{"status":"ok"}`）

---

## 📚 详细文档

更多详细信息请查看：
- `VERCEL_SETUP.md` - Vercel 环境变量详细配置指南
- `DEPLOY.md` - 完整部署文档

---

## 🔒 安全提示

✅ **已完成：**
- 从 README.md 中移除了 API Key
- `.gitignore` 已配置忽略 `.env` 文件

⚠️ **请确保：**
- 不要在任何代码文件中硬编码 API Key
- 只在 Vercel Dashboard 中配置环境变量
- 定期检查是否有泄露的密钥

---

## 🎉 完成！

按照以上步骤操作后，你的应用就可以安全地部署到 Vercel 了！

